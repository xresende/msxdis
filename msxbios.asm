
          ; 
          ; 


CHKRAM:

0x02D7    ld   a,-126
0x02D9    out  (ABh),a
0x02DB    xor  a
0x02DC    out  (A8h),a
0x02DE    ld   a,80
0x02E0    out  (AAh),a
0x02E2    ld   de,0xFFFF
0x02E5    xor  a
0x02E6    ld   c,a

CKRM05:

0x02E7    out  (A8h),a
0x02E9    sla c
0x02EB    ld   b,0
0x02ED    ld   hl,0xFFFF
0x02F0    ld   (hl),-16
0x02F2    ld   a,(hl)
0x02F3    sub  15
0x02F5    jr   nz,CKRM15
0x02F7    ld   (hl),a
0x02F8    ld   a,(hl)
0x02F9    inc  a
0x02FA    jr   nz,CKRM15
0x02FC    inc  b
0x02FD    set 0,c

CKRM10:

0x02FF    ld   (0xFFFF),a

CKRM15:

0x0302    ld   hl,0xBF00

CKRM20:

0x0305    ld   a,(hl)
0x0306    cpl
0x0307    ld   (hl),a
0x0308    cp   (hl)
0x0309    cpl
0x030A    ld   (hl),a
0x030B    jr   nz,CKRM25
0x030D    inc  l
0x030E    jr   nz,CKRM20
0x0310    dec  h
0x0311    jp   m,CKRM20

CKRM25:

0x0314    ld   l,0
0x0316    inc  h
0x0317    ld   a,l
0x0318    sub  e
0x0319    ld   a,h
0x031A    sbc  a,d
0x031B    jr   nc,CKRM30
0x031D    ex   de,hl
0x031E    ld   a,(0xFFFF)
0x0321    cpl
0x0322    ld   l,a
0x0323    in   a,(A8h)
0x0325    ld   h,a
0x0326    ld   sp,hl

CKRM30:

0x0327    ld   a,b
0x0328    and  a
0x0329    jr   z,CKRM35
0x032B    ld   a,(0xFFFF)
0x032E    cpl
0x032F    add  a,16
0x0331    cp   64
0x0333    jr   c,CKRM10

CKRM35:

0x0335    in   a,(A8h)
0x0337    add  a,80
0x0339    jr   nc,CKRM05
0x033B    ld   hl,BEGIN        ; MSX System Init
0x033E    add  hl,sp
0x033F    ld   a,h
0x0340    out  (A8h),a
0x0342    ld   a,l
0x0343    ld   (0xFFFF),a
0x0346    ld   a,c
0x0347    rlca
0x0348    rlca
0x0349    rlca
0x034A    rlca
0x034B    ld   c,a
0x034C    ld   de,0xFFFF
0x034F    in   a,(A8h)
0x0351    and  3Fh

CKRM50:

0x0353    out  (A8h),a
0x0355    ld   b,0
0x0357    rlc c
0x0359    jr   nc,CKRM60
0x035B    inc  b
0x035C    ld   a,(0xFFFF)
0x035F    cpl
0x0360    and  3Fh

CKRM55:

0x0362    ld   (0xFFFF),a

CKRM60:

0x0365    ld   hl,0xFE00

CKRM65:

0x0368    ld   a,(hl)
0x0369    cpl
0x036A    ld   (hl),a
0x036B    cp   (hl)
0x036C    cpl
0x036D    ld   (hl),a
0x036E    jr   nz,CKRM70
0x0370    inc  l
0x0371    jr   nz,CKRM65
0x0373    dec  h
0x0374    ld   a,h
0x0375    cp   -64
0x0377    jr   nc,CKRM65

CKRM70:

0x0379    ld   l,0
0x037B    inc  h
0x037C    ld   a,l
0x037D    sub  e
0x037E    ld   a,h
0x037F    sbc  a,d
0x0380    jr   nc,CKRM75
0x0382    ex   de,hl
0x0383    ld   a,(0xFFFF)
0x0386    cpl
0x0387    ld   l,a
0x0388    in   a,(A8h)
0x038A    ld   h,a
0x038B    ld   sp,hl

CKRM75:

0x038C    ld   a,b
0x038D    and  a
0x038E    jr   z,CKRM80
0x0390    ld   a,(0xFFFF)
0x0393    cpl
0x0394    add  a,64
0x0396    jr   nc,CKRM55

CKRM80:

0x0398    in   a,(A8h)
0x039A    add  a,64
0x039C    jr   nc,CKRM50
0x039E    ld   hl,BEGIN        ; MSX System Init
0x03A1    add  hl,sp
0x03A2    ld   a,h
0x03A3    out  (A8h),a
0x03A5    ld   a,l
0x03A6    ld   (0xFFFF),a
0x03A9    ld   a,c
0x03AA    ld   bc,0x0C49
0x03AD    ld   de,RAMLOW+1
0x03B0    ld   hl,RAMLOW
0x03B3    ld   (hl),0
0x03B5    ldir
0x03B7    ld   c,a
0x03B8    ld   b,4
0x03BA    ld   hl,EXPTBL+3
0x03BD    rr c
0x03BF    sbc  a,a
0x03C0    and  80h
0x03C2    ld   (hl),a
0x03C3    dec  hl
0x03C4    djnz 0x03BD
0x03C6    in   a,(A8h)
0x03C8    ld   c,a
0x03C9    xor  a
0x03CA    out  (A8h),a
0x03CC    ld   a,(0xFFFF)
0x03CF    cpl
0x03D0    ld   l,a
0x03D1    ld   a,64
0x03D3    out  (A8h),a
0x03D5    ld   a,(0xFFFF)
0x03D8    cpl
0x03D9    ld   h,a
0x03DA    ld   a,-128
0x03DC    out  (A8h),a
0x03DE    ld   a,(0xFFFF)
0x03E1    cpl
0x03E2    ld   e,a
0x03E3    ld   a,-64
0x03E5    out  (A8h),a
0x03E7    ld   a,(0xFFFF)
0x03EA    cpl
0x03EB    ld   d,a
0x03EC    ld   a,c
0x03ED    out  (A8h),a
0x03EF    ld   (SLTTBL),hl     ; Cópia dos registradores de slot primário
0x03F2    ex   de,hl
0x03F3    ld   (SLTTBL+2),hl
0x03F6    im   1
0x03F8    jp   0x2680
